# VARIABLES
set $scripts $HOME/.config/sway/scripts
set $mod Mod4

set $swaylock $scripts/lock.sh
set $term way.sh termite
set $menu rofi -show run

set $menu termite --config=$HOME/.config/termite/config-launcher --name=launcher -e "bash -c 'compgen -c | sort -u | fzf | xargs -r swaymsg -t command exec'"
for_window [app_id="^launcher$"] floating enable, border none

set $screenshot $scripts/ss.sh
set $ssregion $scripts/ss.sh --region
set $mixin $scripts/mixin.sh

# Core Keybindings
bindsym $mod+escape exec $menu
bindsym $mod+Delete exec "$swaylock"
bindsym $mod+Return exec $term
bindsym $mod+Shift+Return exec firefox

bindsym $mod+Shift+q kill
bindsym $mod+Shift+c reload
bindsym $mod+Ctrl+Alt+Delete exit

# Outputs
bindsym --locked $mod+F10 exec $mixin output output-laptop; reload
bindsym --locked $mod+F11 exec $mixin output output-dualdesk; reload
bindsym --locked $mod+F12 exec $mixin output output-alien; reload

# Miscellaneous
bindsym $mod+F1 exec redshift

# Screenshots
bindsym $mod+Print exec $screenshot
bindsym $mod+Shift+Print exec $ssregion

# Brightness
bindsym --locked $mod+Alt+Up exec light -A 1
bindsym --locked $mod+Alt+Down exec light -U 1

# misfit setting, where do you go?
floating_modifier $mod normal

include $HOME/.config/sway/config-appearance
include $HOME/.config/sway/config-input

### Idle configuration
exec swayidle \
  before-sleep "$swaylock" \
  timeout 120 "[ -f ~/.idle-inhibit ] || $swaylock" \
  timeout 600 '[ -f ~/.idle-inhibit ] || swaymsg "output * dpms off"' \
       resume '[ -f ~/.idle-inhibit ] || swaymsg "output * dpms on"'
bindsym $mod+Backspace exec [ ! -e ~/.idle-inhibit ] && touch ~/.idle-inhibit || rm ~/.idle-inhibit

# Moving around:
set $left h
set $down j
set $up k
set $right l
  # Move your focus around
  bindsym $mod+$left focus left
  bindsym $mod+$down focus down
  bindsym $mod+$up focus up
  bindsym $mod+$right focus right
  # or use $mod+[up|down|left|right]
  bindsym $mod+Left focus left
  bindsym $mod+Down focus down
  bindsym $mod+Up focus up
  bindsym $mod+Right focus right

  # _move_ the focused window with the same, but add Shift
  bindsym $mod+Shift+$left move left
  bindsym $mod+Shift+$down move down
  bindsym $mod+Shift+$up move up
  bindsym $mod+Shift+$right move right
  # ditto, with arrow keys
  bindsym $mod+Shift+Left move left
  bindsym $mod+Shift+Down move down
  bindsym $mod+Shift+Up move up
  bindsym $mod+Shift+Right move right

# Workspaces:
  # switch to workspace
  bindsym $mod+1 workspace 1
  bindsym $mod+2 workspace 2
  bindsym $mod+3 workspace 3
  bindsym $mod+4 workspace 4
  bindsym $mod+5 workspace 5
  bindsym $mod+6 workspace 6
  bindsym $mod+7 workspace 7
  bindsym $mod+8 workspace 8
  bindsym $mod+9 workspace 9
  bindsym $mod+0 workspace 10
  # move focused container to workspace
  bindsym $mod+Shift+1 move container to workspace 1
  bindsym $mod+Shift+2 move container to workspace 2
  bindsym $mod+Shift+3 move container to workspace 3
  bindsym $mod+Shift+4 move container to workspace 4
  bindsym $mod+Shift+5 move container to workspace 5
  bindsym $mod+Shift+6 move container to workspace 6
  bindsym $mod+Shift+7 move container to workspace 7
  bindsym $mod+Shift+8 move container to workspace 8
  bindsym $mod+Shift+9 move container to workspace 9
  bindsym $mod+Shift+0 move container to workspace 10
  # Note: workspaces can have any name you want, not just numbers.
  # We just use 1-10 as the default.
#
# Layout stuff:
#
  # You can "split" the current object of your focus with
  # $mod+b or $mod+v, for horizontal and vertical splits
  # respectively.
  bindsym $mod+b splith
  bindsym $mod+v splitv

  # Switch the current container between different layout styles
  bindsym $mod+s layout stacking
  bindsym $mod+w layout tabbed
  bindsym $mod+e layout toggle split

  bindsym $mod+f fullscreen
  bindsym $mod+Shift+space floating toggle; border normal
  bindsym $mod+Shift+Up sticky toggle
  bindsym $mod+space focus mode_toggle
  bindsym $mod+a focus parent


# Scratchpad:
  bindsym $mod+Shift+minus move scratchpad
  bindsym $mod+minus scratchpad show


# Resizing containers:
mode "resize" {
  bindsym $left resize shrink width 10px
  bindsym $down resize grow height 10px
  bindsym $up resize shrink height 10px
  bindsym $right resize grow width 10px

  bindsym Left resize shrink width 10px
  bindsym Down resize grow height 10px
  bindsym Up resize shrink height 10px
  bindsym Right resize grow width 10px

  bindsym Return mode "default"
  bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

include $HOME/.config/sway/config-bar

# see: swaywm/sway#2850
workspace 1

include @sysconfdir@/sway/config.d/*
include @sysconfdir@/sway/config.output.d/*
include $HOME/.config/sway/config.output.d/*

exec mako
exec redshift

