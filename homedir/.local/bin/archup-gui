#!/usr/bin/env bash
set -x
set -eou pipefail

archup

COMMON=(networkmanager virt-manager virt-viewer)
GUIAPPS=(vlc firefox-nightly google-chrome-dev firefox-nightly skypeforlinux-preview-bin)
GUIPKGS=(gtk-theme-arc-git numix-circle-icon-theme-git)
FONTS=(ttf-ms-fonts ttf-emojione ttf-fira-mono)
GNOMEPKGS=(gdm gedit eog cheese remmina \
    gnome-{boxes,builder,control-center,screenshot,session,shell,tweaks} \
    chrome-gnome-shell)
KDEPKGS=(plasma plasma-desktop plasma-wayland-session \
    plasma5-applets-redshift-control plasma-nm \
    kdemultimedia-kmix kscreen powerdevil bluedevil kwalletmanager \
    kate spectacle \
    breeze-gtk kde-gtk-config)

# see: https://wiki.archlinux.org/index.php/Talk:Bluetooth_headset#GDMs_pulseaudio_instance_captures_bluetooth_headset
EXTRA=(pulseaudio-bluetooth-a2dp-gdm-fix)

EXCEPTIONAL=(visual-studio-code-insiders)

"yaourt" -S --needed --noconfirm \
   ${COMMON[@]} \
   ${GUIAPPS[@]} \
   ${GUIPKGS[@]} \
   ${FONTS[@]} \
   ${GNOMEPKGS[@]}

   #${KDEPKGS[@]}

MAKEPKG="makepkg --skipinteg" yaourt -S --noconfirm "${EXCEPTIONAL[@]}"

sudo systemctl enable gdm
sudo systemctl enable NetworkManager
sudo systemctl enable bluetooth

sudo gpasswd -a "${USER}" input

